# Is to be executed from the main makefile
INDEXPATH=$(BLDPATH)/index
HABITATS_INDEX_PKL=$(INDEXPATH)/habitats.pkl
HABITATS_INDEXER=./tools/index/habitats.py
HABITATS_READABLE=$(INDEXPATH)/habitats.txt
ITEMS_INDEX_PKL=$(INDEXPATH)/items.pkl
ITEMS_INDEXER=./tools/index/items.py
ITEMS_READABLE=$(INDEXPATH)/items.txt
HIDDEN_READABLE=$(INDEXPATH)/hidden.txt
BERRIES_INDEX_PKL=$(INDEXPATH)/berries.pkl
BERRIES_INDEXER=./tools/index/berry.py
BERRIES_READABLE=$(INDEXPATH)/berries.txt
MISC_INDEX_PKL=$(INDEXPATH)/misc.pkl
MISC_INDEXER=./tools/index/misc_person.py
MISC_READABLE=$(INDEXPATH)/misc.txt
POKEMON_INDEX_PKL=$(INDEXPATH)/pokemon.pkl
POKEMON_INDEXER=./tools/index/pokemon.py
TUTOR_CRYSTAL_INDEX_PKL=$(INDEXPATH)/tutor_crystal.pkl
TUTOR_CRYSTAL_INDEXER=./tools/index/tutor_crystal.py
TUTOR_CRYSTAL_READABLE=$(INDEXPATH)/tutor_crystal.txt
DUNGEON_INDEX_PKL=$(INDEXPATH)/dungeon.pkl
DUNGEON_INDEXER=./tools/index/dungeon.py
DUNGEON_READABLE=$(INDEXPATH)/dungeon.txt

POKEMON_STATS_PKL=$(UPDATED_STATS)
POKEMON_STATS_READABLE=$(INDEXPATH)/pokemon.txt

PRINT_INDEX=./tools/index/print.py

.PHONY: index

$(HABITATS_INDEX_PKL): $(BLDROM) $(MAPPROJ)
	$(shell mkdir -p $(dir $@))
	$(HABITATS_INDEXER) -o $(HABITATS_INDEX_PKL) $(BLDROM) $(SYMBOLDUMP) $(MAPPROJ)

$(ITEMS_INDEX_PKL): $(BLDROM) $(MAPPROJ)
	$(shell mkdir -p $(dir $@))
	$(ITEMS_INDEXER) -o $(ITEMS_INDEX_PKL) $(BLDROM) $(SYMBOLDUMP) $(MAPPROJ)

$(BERRIES_INDEX_PKL): $(BLDROM) $(MAPPROJ)
	$(shell mkdir -p $(dir $@))
	$(BERRIES_INDEXER) -o $(BERRIES_INDEX_PKL) $(BLDROM) $(SYMBOLDUMP) $(MAPPROJ)

$(MISC_INDEX_PKL): $(BLDROM) $(MAPPROJ)
	$(shell mkdir -p $(dir $@))
	$(MISC_INDEXER) -o $(MISC_INDEX_PKL) $(BLDROM) $(SYMBOLDUMP) $(MAPPROJ)

$(POKEMON_INDEX_PKL): $(BLDROM) $(MAPPROJ)
	$(shell mkdir -p $(dir $@))
	$(POKEMON_INDEXER) -o $(POKEMON_INDEX_PKL) $(BLDROM) $(SYMBOLDUMP) $(MAPPROJ)

$(TUTOR_CRYSTAL_INDEX_PKL): $(BLDROM) $(MAPPROJ)
	$(shell mkdir -p $(dir $@))
	$(TUTOR_CRYSTAL_INDEXER) -o $(TUTOR_CRYSTAL_INDEX_PKL) $(BLDROM) $(SYMBOLDUMP) $(MAPPROJ)

$(DUNGEON_INDEX_PKL): $(BLDROM) $(MAPPROJ)
	$(shell mkdir -p $(dir $@))
	$(DUNGEON_INDEXER) -o $(DUNGEON_INDEX_PKL) $(BLDROM) $(SYMBOLDUMP) $(MAPPROJ)


index: $(HABITATS_INDEX_PKL) $(ITEMS_INDEX_PKL) $(BERRIES_INDEX_PKL) $(MISC_INDEX_PKL) $(POKEMON_INDEX_PKL) $(TUTOR_CRYSTAL_INDEX_PKL) $(DUNGEON_INDEX_PKL) $(POKEMON_STATS_PKL)
	$(PRINT_INDEX) -o $(HABITATS_READABLE) --habitats $(HABITATS_INDEX_PKL)
	$(PRINT_INDEX) -o $(ITEMS_READABLE) --items $(ITEMS_INDEX_PKL)
	$(PRINT_INDEX) -o $(HIDDEN_READABLE) --hidden $(ITEMS_INDEX_PKL)
	$(PRINT_INDEX) -o $(BERRIES_READABLE) --berries $(BERRIES_INDEX_PKL)
	$(PRINT_INDEX) -o $(MISC_READABLE) --misc $(MISC_INDEX_PKL)
	$(PRINT_INDEX) -o $(TUTOR_CRYSTAL_READABLE) --tutor_crystal $(TUTOR_CRYSTAL_INDEX_PKL)
	$(PRINT_INDEX) -o $(DUNGEON_READABLE) --dungeon $(DUNGEON_INDEX_PKL)
	$(PRINT_INDEX) -o $(POKEMON_STATS_READABLE) --pokemon $(POKEMON_STATS_PKL)